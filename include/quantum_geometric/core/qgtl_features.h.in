/**
 * @file qgtl_features.h
 * @brief Auto-generated feature detection header for QGTL
 *
 * This file is automatically generated by CMake during configuration.
 * DO NOT EDIT MANUALLY - changes will be overwritten.
 *
 * Use these macros to check for available features at compile time:
 *
 *   #if QGTL_HAS_MPI
 *       // MPI code path
 *   #else
 *       // Single-process fallback
 *   #endif
 */

#ifndef QGTL_FEATURES_H
#define QGTL_FEATURES_H

/* =============================================================================
 * QGTL Version Information
 * =============================================================================*/
#define QGTL_VERSION_MAJOR @PROJECT_VERSION_MAJOR@
#define QGTL_VERSION_MINOR @PROJECT_VERSION_MINOR@
#define QGTL_VERSION_PATCH @PROJECT_VERSION_PATCH@
#define QGTL_VERSION_STRING "@PROJECT_VERSION@"

/* =============================================================================
 * Platform Detection
 * =============================================================================*/
#cmakedefine01 QGTL_PLATFORM_MACOS
#cmakedefine01 QGTL_PLATFORM_LINUX
#cmakedefine01 QGTL_PLATFORM_WINDOWS

/* =============================================================================
 * Architecture Detection
 * =============================================================================*/
#cmakedefine01 QGTL_ARCH_ARM64
#cmakedefine01 QGTL_ARCH_X86_64

/* =============================================================================
 * SIMD Capabilities
 * =============================================================================*/
#cmakedefine01 QGTL_SIMD_NEON
#cmakedefine01 QGTL_SIMD_AVX
#cmakedefine01 QGTL_SIMD_AVX2
#cmakedefine01 QGTL_SIMD_AVX512
#cmakedefine01 QGTL_SIMD_FMA

/* =============================================================================
 * GPU Acceleration
 * =============================================================================*/
#cmakedefine01 QGTL_HAS_METAL
#cmakedefine01 QGTL_HAS_CUDA

/* =============================================================================
 * Distributed Computing
 * =============================================================================*/
#cmakedefine01 QGTL_HAS_MPI
#cmakedefine01 QGTL_HAS_HWLOC

/* =============================================================================
 * External Libraries
 * =============================================================================*/
#cmakedefine01 QGTL_HAS_CURL
#cmakedefine01 QGTL_HAS_JSON_C
#cmakedefine01 QGTL_HAS_ZLIB
#cmakedefine01 QGTL_HAS_BLAS
#cmakedefine01 QGTL_HAS_LAPACK

/* =============================================================================
 * Quantum Format Parsers
 * =============================================================================*/
#cmakedefine01 QGTL_HAS_QEQASM
#cmakedefine01 QGTL_HAS_LIBQUIL

/* =============================================================================
 * Hardware Backend Availability
 * Based on detected dependencies
 * =============================================================================*/

/* IBM Quantum backend requires CURL for API access */
#if QGTL_HAS_CURL
    #define QGTL_HAS_IBM_BACKEND 1
#else
    #define QGTL_HAS_IBM_BACKEND 0
#endif

/* D-Wave backend requires CURL and JSON-C */
#if QGTL_HAS_CURL && QGTL_HAS_JSON_C
    #define QGTL_HAS_DWAVE_BACKEND 1
#else
    #define QGTL_HAS_DWAVE_BACKEND 0
#endif

/* Rigetti backend requires CURL and JSON-C */
#if QGTL_HAS_CURL && QGTL_HAS_JSON_C
    #define QGTL_HAS_RIGETTI_BACKEND 1
#else
    #define QGTL_HAS_RIGETTI_BACKEND 0
#endif

/* Simulator backend is always available */
#define QGTL_HAS_SIMULATOR_BACKEND 1

/* =============================================================================
 * Feature Capability Macros
 * =============================================================================*/

/* GPU acceleration available */
#if QGTL_HAS_METAL || QGTL_HAS_CUDA
    #define QGTL_HAS_GPU 1
#else
    #define QGTL_HAS_GPU 0
#endif

/* Distributed computing available */
#if QGTL_HAS_MPI
    #define QGTL_HAS_DISTRIBUTED 1
#else
    #define QGTL_HAS_DISTRIBUTED 0
#endif

/* Cloud backends available (any real hardware access) */
#if QGTL_HAS_IBM_BACKEND || QGTL_HAS_DWAVE_BACKEND || QGTL_HAS_RIGETTI_BACKEND
    #define QGTL_HAS_CLOUD_BACKENDS 1
#else
    #define QGTL_HAS_CLOUD_BACKENDS 0
#endif

/* =============================================================================
 * Build Configuration
 * =============================================================================*/
#define QGTL_BUILD_TYPE "@CMAKE_BUILD_TYPE@"

#cmakedefine01 QGTL_BUILD_SHARED
#cmakedefine01 QGTL_BUILD_STATIC

/* =============================================================================
 * Runtime Feature Queries (for C code)
 * =============================================================================*/
#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Get QGTL version string
 * @return Version string in format "major.minor.patch"
 */
static inline const char* qgtl_get_version(void) {
    return QGTL_VERSION_STRING;
}

/**
 * @brief Check if a specific feature is available
 * @param feature Feature name (e.g., "mpi", "cuda", "metal", "ibm", "dwave")
 * @return 1 if available, 0 otherwise
 */
static inline int qgtl_has_feature(const char* feature) {
    if (!feature) return 0;

    /* Platform */
    if (feature[0] == 'm' && feature[1] == 'a' && feature[2] == 'c') return QGTL_PLATFORM_MACOS;
    if (feature[0] == 'l' && feature[1] == 'i' && feature[2] == 'n') return QGTL_PLATFORM_LINUX;
    if (feature[0] == 'w' && feature[1] == 'i' && feature[2] == 'n') return QGTL_PLATFORM_WINDOWS;

    /* GPU */
    if (feature[0] == 'm' && feature[1] == 'e' && feature[2] == 't') return QGTL_HAS_METAL;
    if (feature[0] == 'c' && feature[1] == 'u' && feature[2] == 'd') return QGTL_HAS_CUDA;
    if (feature[0] == 'g' && feature[1] == 'p' && feature[2] == 'u') return QGTL_HAS_GPU;

    /* Distributed */
    if (feature[0] == 'm' && feature[1] == 'p' && feature[2] == 'i') return QGTL_HAS_MPI;
    if (feature[0] == 'h' && feature[1] == 'w' && feature[2] == 'l') return QGTL_HAS_HWLOC;

    /* Hardware backends */
    if (feature[0] == 'i' && feature[1] == 'b' && feature[2] == 'm') return QGTL_HAS_IBM_BACKEND;
    if (feature[0] == 'd' && feature[1] == 'w' && feature[2] == 'a') return QGTL_HAS_DWAVE_BACKEND;
    if (feature[0] == 'r' && feature[1] == 'i' && feature[2] == 'g') return QGTL_HAS_RIGETTI_BACKEND;
    if (feature[0] == 's' && feature[1] == 'i' && feature[2] == 'm') return QGTL_HAS_SIMULATOR_BACKEND;

    return 0;
}

/**
 * @brief Print QGTL build configuration summary
 */
static inline void qgtl_print_features(void) {
    #include <stdio.h>
    printf("QGTL Version: %s\n", QGTL_VERSION_STRING);
    printf("Build Type: %s\n", QGTL_BUILD_TYPE);
    printf("\nPlatform:\n");
#if QGTL_PLATFORM_MACOS
    printf("  macOS: YES\n");
#elif QGTL_PLATFORM_LINUX
    printf("  Linux: YES\n");
#elif QGTL_PLATFORM_WINDOWS
    printf("  Windows: YES\n");
#endif

#if QGTL_ARCH_ARM64
    printf("  Architecture: ARM64\n");
#elif QGTL_ARCH_X86_64
    printf("  Architecture: x86_64\n");
#endif

    printf("\nSIMD:\n");
#if QGTL_SIMD_NEON
    printf("  NEON: YES\n");
#endif
#if QGTL_SIMD_AVX512
    printf("  AVX-512: YES\n");
#elif QGTL_SIMD_AVX2
    printf("  AVX2: YES\n");
#elif QGTL_SIMD_AVX
    printf("  AVX: YES\n");
#endif
#if QGTL_SIMD_FMA
    printf("  FMA: YES\n");
#endif

    printf("\nGPU Acceleration:\n");
    printf("  Metal: %s\n", QGTL_HAS_METAL ? "YES" : "NO");
    printf("  CUDA: %s\n", QGTL_HAS_CUDA ? "YES" : "NO");

    printf("\nDistributed Computing:\n");
    printf("  MPI: %s\n", QGTL_HAS_MPI ? "YES" : "NO");
    printf("  hwloc: %s\n", QGTL_HAS_HWLOC ? "YES" : "NO");

    printf("\nHardware Backends:\n");
    printf("  IBM Quantum: %s\n", QGTL_HAS_IBM_BACKEND ? "YES" : "NO");
    printf("  D-Wave: %s\n", QGTL_HAS_DWAVE_BACKEND ? "YES" : "NO");
    printf("  Rigetti: %s\n", QGTL_HAS_RIGETTI_BACKEND ? "YES" : "NO");
    printf("  Simulator: YES\n");

    printf("\nExternal Libraries:\n");
    printf("  CURL: %s\n", QGTL_HAS_CURL ? "YES" : "NO");
    printf("  JSON-C: %s\n", QGTL_HAS_JSON_C ? "YES" : "NO");
    printf("  zlib: %s\n", QGTL_HAS_ZLIB ? "YES" : "NO");
}

#ifdef __cplusplus
}
#endif

#endif /* QGTL_FEATURES_H */
